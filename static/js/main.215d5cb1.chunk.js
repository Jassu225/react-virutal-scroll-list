(this["webpackJsonpreact-virtual-scroll-list"]=this["webpackJsonpreact-virtual-scroll-list"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/loader.1d7626e6.gif"},,,function(e,t,n){e.exports=n(37)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(5),l=n.n(o),i=(n(23),n(24),n(2)),r=(n(25),n(1)),s=(n(31),n(9)),u=n.n(s),d=n(13),m="https://jsonplaceholder.typicode.com/photos",f=-1,h=0,b=1,g=2;function p(){return(p=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,t(v(h)),e.next=5,fetch(m).then((function(e){return e.json()}));case 5:n=e.sent,t(v(b)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(v(g));case 12:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var v=function(e){return{type:"setApiStatus",payload:{data:e}}},j=function(){return function(e){return function(e){return p.apply(this,arguments)}(e).then((function(t){return e({type:"setData",payload:{data:t}})}),(function(e){console.error(e)}))}};var w=function(e){var t=Object(r.b)(),n=e.columns.map((function(e){var t={width:e.width};return a.a.createElement("div",{className:"data-table-header-cell",style:t,key:e.id},e.label)})),o=Object(r.c)((function(e){return function(e){return e.selectAll}(e)})),l=Object(c.useCallback)((function(e){e.target.checked?t({type:"selectAll",payload:{}}):t({type:"deselectAll",payload:{}})}),[]);return a.a.createElement("div",{className:"data-table-header-container"},a.a.createElement("div",{className:"data-table-header"},a.a.createElement("div",{className:"data-table-header-checkbox"},a.a.createElement("input",{type:"checkbox",checked:o,onChange:l})),a.a.createElement("div",{className:"data-table-header-cells"},n)))},O=n(17),E=n(3);n(33),n(34);var y=function(e){var t=Object(r.b)(),n=e.columns.map((function(t){var n={width:t.width,textAlign:t.numeric?"right":"left"};return a.a.createElement("div",{className:"custom-scroll-list-row-cell",style:n,key:t.id},e.data[t.id]||"n/a")})),o={height:e.height+"px",left:0,top:e.index*e.height+"px"},l=Object(r.c)((function(e){return function(e){return e.selections}(e)})),i=Object(c.useMemo)((function(){return console.log(l),l.includes(e.data.id)}),[e.data.id,l]);return a.a.createElement("div",{className:"custom-scroll-list-row-container",style:o,onClick:function(){}},a.a.createElement("div",{className:"custom-scroll-list-row"},a.a.createElement("div",{className:"custom-scroll-list-row-checkbox"},a.a.createElement("input",{type:"checkbox",checked:i,onChange:function(n){n.target.checked?t({type:"addToSelectionList",payload:{id:e.data.id}}):t(function(e){return{type:"removeFromSelectionList",payload:{id:e}}}(e.data.id)),e.onSelectionChange(n.target,e.data,e.index)}})),a.a.createElement("div",{className:"custom-scroll-list-row-cells"},n)))},k=n(14),x=n(15),C=n.n(x);n(36);var S=function(){return a.a.createElement("div",{className:"data-loader"},a.a.createElement("img",{src:C.a,alt:"loading...",className:"loader-image"}))};var R=function(e){var t=Object(c.useMemo)((function(){return(e.list||[]).length}),[e.list]),n=Object(c.useMemo)((function(){return t*e.itemHeight}),[t,e.itemHeight]),o=Object(c.useRef)(null),l=Object(c.useRef)(null),i=Object(c.useState)(0),s=Object(E.a)(i,2),u=s[0],d=s[1],m=Object(c.useState)([]),f=Object(E.a)(m,2),b=f[0],g=f[1],p=Object(c.useState)(0),v=Object(E.a)(p,2),j=v[0],w=v[1],x=Object(c.useState)(!1),C=Object(E.a)(x,2),R=C[0],N=C[1],A=Object(c.useState)([0,0]),H=Object(E.a)(A,2),M=H[0],T=H[1],I=Object(c.useRef)(null),L=function(){I.current=o.current.getBoundingClientRect()};Object(c.useEffect)((function(){return console.log("resize -- effect"),I.current=o.current.getBoundingClientRect(),window.addEventListener("resize",L),function(){window.removeEventListener("resize",L)}}),[]),Object(c.useEffect)((function(){console.log("setMaxVisibleRowsCount -- effect");var t=o.current.getBoundingClientRect();console.log(t);var n=3*Math.max(Math.ceil(t.height/e.itemHeight),4);d(Math.min(n,e.list.length))}),[e.itemHeight,e.list.length]),Object(c.useEffect)((function(){console.log("setVisibleRowsIndexRange -- effect"),T([0,u])}),[u]),Object(c.useEffect)((function(){var t;console.log("setVisibleRows -- effect"),console.log("visibleRowsIndexRange--",M);var n=(t=e.list).slice.apply(t,Object(O.a)(M)).map((function(t,n){return a.a.createElement(y,{data:t,columns:e.columns,index:n+M[0],height:e.itemHeight,key:t.id,onRowClick:e.onRowClick,onSelectionChange:e.onSelectionChange})}));g(n)}),[e.columns,e.itemHeight,e.list,e.onRowClick,e.onSelectionChange,M]),Object(c.useEffect)((function(){w(o.current.scrollTop),window.setTimeout((function(){N(!1)}),220)}),[b]);var B=function(t){var n=t.slice(0);return n[0]<0?(n[0]=0,n[1]=u):n[1]>=e.list.length&&(n[0]=e.list.length-u,n[1]=e.list.length),n},D=function(e){var t=M[0],n=M[1],c=u/3;console.log("visibleRowsCount --",c),"down"===e?(t+=c,n+=c):(t-=c,n-=c);var a=B([t,n]),o=Object(E.a)(a,2);t=o[0],n=o[1],console.log("scrollDirection--",e),console.log("setVisibleRowsIndexRange--",[t,n]),N(!0),T([t,n])},V=function(t,n,c,a,l){var i=t[a]-n[a],r=0,s=u/3;t[a]>n[a]?i<5*e.itemHeight&&(console.log("case1"),D(l)):t[c]<n[c]?(console.log("case3"),r=Math.round(o.current.scrollTop/e.itemHeight),N(!0),T(B([r-s,r+s]))):(console.log("case2"),D(l))},z=function(t){var n=o.current.scrollTop,c=M[t]*e.itemHeight-n;return{top:c,bottom:c+e.itemHeight}},F=Object(k.throttle)((function(e){if(!R){var t=o.current.scrollTop;if(j<t){var n=z(1);V(n,I.current,"top","bottom","down")}else{var c=z(0);V(I.current,c,"bottom","top","up")}w(t)}}),50),J={height:n+"px"},W=Object(r.c)((function(e){return function(e){return e.apiStatus}(e)})),$=Object(c.useMemo)((function(){return W===h}),[W]);return a.a.createElement("div",{ref:o,className:"custom-scroll-list",onScroll:F},$?a.a.createElement(S,null):a.a.createElement("div",{ref:l,className:"custom-scroll-container",style:J},b))};var N=function(e){var t=e.columns.reduce((function(e,t){return t.numeric?e+1:e}),0),n=e.columns.length-t,c=e.columns.map((function(e){var c=Object(i.a)({},e);return c.width||(c.width=e.numeric?"".concat(70,"px"):"calc( (100% - ".concat(70*t,") / ").concat(n,")")),c}));return a.a.createElement("div",{className:"data-table"},a.a.createElement(w,{columns:c}),a.a.createElement(R,{columns:c,list:e.rows,itemHeight:50,onRowClick:e.onRowClick,onSelectionChange:e.onSelectionChange}))};var A=function(e){var t=Object(r.b)();Object(c.useEffect)((function(){t(j())}),[]);var n=Object(r.c)((function(e){return function(e){return e.list}(e)}));return a.a.createElement("div",{className:"App"},a.a.createElement(N,{columns:[{id:"id",label:"ID",numeric:!0},{id:"title",label:"Album Title",numeric:!1,width:"50%"}],rows:n,onRowClick:function(e,t){},onSelectionChange:function(e,t,n){}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=n(4),M=n(16),T={list:[],apiStatus:f,selections:[],selectAll:!1},I=Object(H.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setData":var n=t.payload.data;return Object(i.a)({},e,{list:n});case"setApiStatus":var c=t.payload.data;return Object(i.a)({},e,{apiStatus:c});case"addToSelectionList":var a=t.payload.id,o=e.selections.concat([a]);return Object(i.a)({},e,{selections:o,selectAll:e.list.length===o.length});case"removeFromSelectionList":var l=t.payload.id,r=e.selections.slice(0),s=r.findIndex((function(e){return e===l}));return s>-1&&r.splice(s,1),Object(i.a)({},e,{selections:r,selectAll:!1});case"selectAll":return Object(i.a)({},e,{selectAll:!0,selections:e.list.map((function(e){return e.id}))});case"deselectAll":return Object(i.a)({},e,{selectAll:!1,selections:[]});default:return e}}),Object(H.a)(M.a));l.a.render(a.a.createElement(r.a,{store:I},a.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[18,1,2]]]);
//# sourceMappingURL=main.215d5cb1.chunk.js.map